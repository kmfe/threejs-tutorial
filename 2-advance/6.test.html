<!doctype html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport'
          content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'>
  <meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      padding: 200px;
    }

    h1 {
      margin-bottom: 20px;
    }

    .wrap {
      display: flex;
    }

    .td-item {
      border: 1px solid #ccc;
      margin-right: -1px;
    }

    .td {
      display: block;
      margin-top: -1px;
      width: 30px;
      height: 30px;
      border-bottom: 1px solid #cd0000;
      font-size: 10px;
      text-align: center;
      line-height: 30px;
    }

    .td:nth-last-child(1) {
      border: none;
    }
  </style>
</head>
<body>
<div id='app'>
  <h1>根据经纬度获取3D物体坐标</h1>
  <div class='wrap'>
    <div v-for='(item, index) in list' :key='index' class='td-item'>
      <div v-for='(axis, k) in item.data' class='td' :key='k'>
        {{axis.value}}
      </div>
    </div>
  </div>
  <script>
    let example = [
      [1, 2, 3, 4, 5, 6, 7, 8],
      [11, 12, 13, 14, 15, 16, 17, 18, 19],
      [21, 22, 23, 24, 25, 26]
      // [31, 32]
    ]
    const json2 = {
      'total': {'1': 35, '2': 51},
      'list': [
        // 9
        [
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'},
          {'drawItem': '734671', 'drawCode': '10,8,3,1,5,6,9,2,7,4', 'drawType': '2'}
        ],
        // 8
        [
          {'drawItem': '734670', 'drawCode': '3,9,6,10,2,4,5,7,1,8', 'drawType': '1'},
          {'drawItem': '734669', 'drawCode': '10,7,8,1,5,9,2,3,4,6', 'drawType': '1'},
          {'drawItem': '734670', 'drawCode': '3,9,6,10,2,4,5,7,1,8', 'drawType': '1'},
          {'drawItem': '734669', 'drawCode': '10,7,8,1,5,9,2,3,4,6', 'drawType': '1'},
          {'drawItem': '734670', 'drawCode': '3,9,6,10,2,4,5,7,1,8', 'drawType': '1'},
          {'drawItem': '734669', 'drawCode': '10,7,8,1,5,9,2,3,4,6', 'drawType': '1'},
          {'drawItem': '734670', 'drawCode': '3,9,6,10,2,4,5,7,1,8', 'drawType': '1'},
          {'drawItem': '734669', 'drawCode': '10,7,8,1,5,9,2,3,4,6', 'drawType': '1'}
        ],
        // 6
        [
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'},
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'},
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'},
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'},
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'},
          {'drawItem': '734668', 'drawCode': '2,6,4,7,5,8,3,9,1,10', 'drawType': '3'}
        ],
        // 3
        [
          {'drawItem': '734667', 'drawCode': '1,10,7,3,8,2,6,4,9,5', 'drawType': '4'},
          {'drawItem': '734667', 'drawCode': '1,10,7,3,8,2,6,4,9,5', 'drawType': '4'},
          {'drawItem': '734667', 'drawCode': '1,10,7,3,8,2,6,4,9,5', 'drawType': '4'},
          {'drawItem': '734667', 'drawCode': '1,10,7,3,8,2,6,4,9,5', 'drawType': '4'}
        ],
        // 4
        [
          {'drawItem': '734666', 'drawCode': '8,10,3,6,7,9,1,2,5,4', 'drawType': '5'},
          {'drawItem': '734665', 'drawCode': '4,2,3,8,6,9,10,5,7,1', 'drawType': '5'},
          {'drawItem': '734666', 'drawCode': '8,10,3,6,7,9,1,2,5,4', 'drawType': '5'},
          {'drawItem': '734666', 'drawCode': '8,10,3,6,7,9,1,2,5,4', 'drawType': '5'}
        ],
        [
          {
            'drawItem': '734664',
            'drawCode': '7,5,10,1,3,2,6,4,8,9',
            'drawType': '1'
          }
        ],
        [
          {'drawItem': '734663', 'drawCode': '10,4,3,9,8,5,1,2,6,7', 'drawType': '2'}
        ],
        [{
          'drawItem': '734662',
          'drawCode': '4,8,10,7,5,9,6,3,1,2',
          'drawType': '1'
        }],
        [
          {'drawItem': '734661', 'drawCode': '1,8,5,4,2,6,9,10,7,3', 'drawType': '2'},
          {
            'drawItem': '734660',
            'drawCode': '9,7,4,5,1,6,3,10,8,2',
            'drawType': '2'
          }
        ],
        [
          {'drawItem': '734659', 'drawCode': '5,8,10,6,4,3,9,7,2,1', 'drawType': '1'}
        ],
        [
          {'drawItem': '734658', 'drawCode': '5,9,3,8,7,2,10,4,1,6', 'drawType': '2'},
          {'drawItem': '734657', 'drawCode': '4,10,2,7,9,1,6,8,5,3', 'drawType': '2'},
          {'drawItem': '734656', 'drawCode': '4,6,2,9,7,8,3,5,10,1', 'drawType': '2'},
          {'drawItem': '734658', 'drawCode': '5,9,3,8,7,2,10,4,1,6', 'drawType': '2'},
          {'drawItem': '734657', 'drawCode': '4,10,2,7,9,1,6,8,5,3', 'drawType': '2'},
          {'drawItem': '734658', 'drawCode': '5,9,3,8,7,2,10,4,1,6', 'drawType': '2'},
          {'drawItem': '734657', 'drawCode': '4,10,2,7,9,1,6,8,5,3', 'drawType': '2'}
        ],
        [{'drawItem': '734655', 'drawCode': '2,1,7,3,6,10,4,8,9,5', 'drawType': '1'}],
        [{'drawItem': '734654', 'drawCode': '10,7,5,4,9,6,3,2,8,1', 'drawType': '2'}],
        [{
          'drawItem': '734653',
          'drawCode': '8,4,10,1,5,3,2,9,6,7',
          'drawType': '1'
        }, {
          'drawItem': '734652',
          'drawCode': '9,3,10,5,2,6,1,8,4,7',
          'drawType': '1'
        }],
        [{'drawItem': '734651', 'drawCode': '6,8,3,1,9,10,5,4,7,2', 'drawType': '2'}], [{
          'drawItem': '734650',
          'drawCode': '1,2,8,3,5,4,6,7,9,10',
          'drawType': '1'
        }, {'drawItem': '734649', 'drawCode': '6,1,10,9,5,2,4,8,7,3', 'drawType': '1'}, {
          'drawItem': '734648',
          'drawCode': '9,5,8,6,3,7,1,2,10,4',
          'drawType': '1'
        }, {'drawItem': '734647', 'drawCode': '4,6,7,1,8,5,2,10,9,3', 'drawType': '1'}, {
          'drawItem': '734646',
          'drawCode': '7,1,8,9,3,2,10,6,5,4',
          'drawType': '1'
        }], [{'drawItem': '734645', 'drawCode': '2,9,1,7,8,10,6,5,4,3', 'drawType': '2'}], [{
          'drawItem': '734644',
          'drawCode': '2,10,6,9,1,4,3,8,7,5',
          'drawType': '1'
        }], [{'drawItem': '734643', 'drawCode': '7,10,1,6,9,3,8,4,5,2', 'drawType': '2'}, {
          'drawItem': '734642',
          'drawCode': '5,10,2,1,7,9,3,4,6,8',
          'drawType': '2'
        }, {'drawItem': '734641', 'drawCode': '8,7,5,6,4,10,9,2,3,1', 'drawType': '2'}], [{
          'drawItem': '734640',
          'drawCode': '9,5,6,7,8,3,4,2,10,1',
          'drawType': '1'
        }], [{'drawItem': '734639', 'drawCode': '3,2,1,7,8,10,4,6,9,5', 'drawType': '2'}, {
          'drawItem': '734638',
          'drawCode': '10,5,3,7,2,6,8,1,9,4',
          'drawType': '2'
        }, {'drawItem': '734637', 'drawCode': '2,8,1,6,3,7,10,9,4,5', 'drawType': '2'}, {
          'drawItem': '734636',
          'drawCode': '7,10,3,6,8,1,5,4,9,2',
          'drawType': '2'
        }, {'drawItem': '734635', 'drawCode': '3,10,4,5,7,6,9,1,8,2', 'drawType': '2'}, {
          'drawItem': '734634',
          'drawCode': '4,7,2,10,3,5,1,6,9,8',
          'drawType': '2'
        }], [{'drawItem': '734633', 'drawCode': '7,6,10,1,5,4,8,9,3,2', 'drawType': '1'}], [{
          'drawItem': '734632',
          'drawCode': '4,1,3,9,6,5,10,8,7,2',
          'drawType': '2'
        }, {'drawItem': '734631', 'drawCode': '9,7,1,10,3,2,5,4,6,8', 'drawType': '2'}], [{
          'drawItem': '734630',
          'drawCode': '5,2,9,4,3,1,7,8,6,10',
          'drawType': '1'
        }], [{'drawItem': '734629', 'drawCode': '9,3,5,8,2,7,6,10,1,4', 'drawType': '2'}, {
          'drawItem': '734628',
          'drawCode': '2,9,5,7,10,3,8,4,6,1',
          'drawType': '2'
        }]]
    }
    new Vue({
      el: '#app',
      data: {
        msg: 'text',
        column: 35,
        row: 6,
        list: []
      },
      created () {
        // 初始化36*5组数据
        for (let x = 0; x < 35; x++) {
          let arr = []
          for (let y = 0; y < 6; y++) {
            arr.push({x, y})
          }
          this.list.push({
            len: 6,
            data: arr
          })
        }
        this.convertData(json2.list, this.list)
      },
      methods: {
        convertData (lzData, target) {
          for (let i = 0; i < lzData.length; i++) {
            const nextList = []
            let len = lzData[i].length
            let currentList = target[i]

            let diff = len - currentList.len > 0 ? (len - currentList.len) : 0

            console.log(len, currentList.len, i, diff)
            // 添加未多出的数据

            for (let k = 0; k < currentList.len; k++) {
              this.$set(currentList.data[k], 'value', lzData[i][k].drawType)
              this.$set(currentList.data[k], 'drawItem', lzData[i][k].drawItem)
              this.$set(currentList.data[k], 'drawCode', lzData[i][k].drawCode)
              if (k === len - 1) break
            }

            // 处理多出的数据
            if (diff) {
              console.log(diff, 'diff', '第' + i + '项')
              // 将多出来的数据，分布到的列，分布过去的列的长度 均减去 1
              for (let j = 0; j < diff; j++) {
                nextList.push(i + 1 + j)
                this.$set(target[i + 1 + j], 'len', target[i].len - 1)
              }

              // 将多出来的数据，分布到指定列 的 指定项目
              for (let x = 0; x < nextList.length; x++) {
                let columnIndex = nextList[x]
                let rowIndex = target[nextList[0]].len
                this.$set(target[columnIndex].data[rowIndex], 'value', lzData[i][currentList.len + x].drawType)
                this.$set(target[columnIndex].data[rowIndex], 'drawItem', lzData[i][currentList.len + x].drawItem)
                this.$set(target[columnIndex].data[rowIndex], 'drawCode', lzData[i][currentList.len + x].drawCode)
              }
            }
          }
        }
      }
    })
  </script>
</div>
</body>
</html>
